/* Page transition animations */
.page-wrapper {
  width: 100%;
  height: 100%;
  position: absolute; /* Ensure pages overlap during transition */
  top: 0;
  left: 0;
  right: 0;
  
  /* Enable scrolling within the page wrapper */
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
  touch-action: pan-y; /* Explicitly allow vertical touch scrolling */
  
  background-color: var(--app-page-background); /* Fallback background to prevent white flash */
  backface-visibility: hidden; /* Improve performance */
  perspective: 1000px; /* Improve performance */
}

/* Common active styles */
.page-enter-active,
.page-exit-active,
.page-back-enter-active,
.page-back-exit-active {
  transition: opacity 300ms cubic-bezier(0.4, 0, 0.2, 1), transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.page-enter-done,
.page-back-enter-done {
  position: relative; /* Ensure it takes up space after animation */
}

/* FORWARD ANIMATION (PUSH) */

/* Enter: Slide in from Bottom */
.page-enter {
  opacity: 0;
  transform: translateY(100%);
  z-index: 1; /* New page on top */
}

.page-enter-active {
  opacity: 1;
  transform: translateY(0);
}

.page-enter-done {
  opacity: 1;
  transform: translateY(0);
}

/* Exit: Scale down slightly */
.page-exit {
  opacity: 1;
  transform: scale(1);
  z-index: 0;
}

.page-exit-active {
  opacity: 0.5;
  transform: scale(0.95);
}

/* BACKWARD ANIMATION (POP) */

/* Enter: Scale back up */
.page-back-enter {
  opacity: 0.5;
  transform: scale(0.95);
  z-index: 0;
}

.page-back-enter-active {
  opacity: 1;
  transform: scale(1);
}

.page-back-enter-done {
  opacity: 1;
  transform: scale(1);
}

/* Exit: Slide out to Bottom */
.page-back-exit {
  opacity: 1;
  transform: translateY(0);
  z-index: 1; /* Exiting page on top */
}

.page-back-exit-active {
  opacity: 0;
  transform: translateY(100%);
}

/* Appear animation (initial load) */
.page-appear {
  opacity: 1;
  transform: translateY(0);
}

.page-appear-active {
  opacity: 1;
  transform: translateY(0);
}
